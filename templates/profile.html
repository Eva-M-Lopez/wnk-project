{% extends "base.html" %}

{% block title %}Profile - Waste Not Kitchen{% endblock %}

{% block content %}
<div class="form-container">
    <h2>My Profile</h2>
    <form method="POST" action="{{ url_for('auth.profile') }}">
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" value="{{ user.email }}" disabled>
            <small>Email cannot be changed</small>
        </div>

        <div class="form-group">
            <label for="name">Full Name:</label>
            <input type="text" name="name" id="name" value="{{ user.name }}" required>
        </div>

        <div class="form-group">
            <label for="address">Address:</label>
            <textarea name="address" id="address" required rows="3">{{ user.address }}</textarea>
        </div>

        <div class="form-group">
            <label for="phone">Phone Number:</label>
            <input type="tel" name="phone" id="phone" value="{{ user.phone or '' }}">
        </div>

        {% if session.user_type in ['customer', 'donner'] and payment_info %}
        <h3>Payment Information</h3>
        
        <div class="form-group">
            <label for="card_holder">Cardholder Name:</label>
            <input type="text" name="card_holder" id="card_holder" value="{{ payment_info.card_holder }}">
        </div>

        <div class="form-group">
            <label for="card_number">Card Number:</label>
            <input type="text" name="card_number" id="card_number" value="{{ payment_info.card_number }}" maxlength="16">
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="expiry_date">Expiry Date:</label>
                <input type="text" name="expiry_date" id="expiry_date" value="{{ payment_info.expiry_date }}" placeholder="MM/YYYY">
            </div>

            <div class="form-group">
                <label for="cvv">CVV:</label>
                <input type="text" name="cvv" id="cvv" value="{{ payment_info.cvv }}" maxlength="4">
            </div>
        </div>
        {% endif %}

        <button type="submit" class="btn btn-primary">Update Profile</button>
    </form>
</div>
{% endblock %}